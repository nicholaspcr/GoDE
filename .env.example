# GoDE Server Configuration Example
# Copy this file to .env and update with your values

# =============================================================================
# Security Configuration
# =============================================================================

# JWT Secret (REQUIRED) - Must be at least 32 characters
# Generate with: openssl rand -base64 32
JWT_SECRET=your-secret-key-here-must-be-at-least-32-characters-long

# JWT Token Expiry (default: 24h)
# Supported units: s (seconds), m (minutes), h (hours)
# JWT_EXPIRY=24h

# =============================================================================
# Server Configuration
# =============================================================================

# gRPC Server Listen Address (default: localhost:3030)
# SERVER_LISTEN_ADDR=localhost:3030

# HTTP Gateway Port (default: :8081)
# SERVER_HTTP_PORT=:8081

# =============================================================================
# TLS/HTTPS Configuration
# =============================================================================

# Enable TLS (default: false)
# For production, set to true and provide cert/key files
# TLS_ENABLED=false

# TLS Certificate File Path
# TLS_CERT_FILE=/path/to/cert.pem

# TLS Private Key File Path
# TLS_KEY_FILE=/path/to/key.pem

# =============================================================================
# Rate Limiting Configuration
# =============================================================================

# Authentication requests per minute per IP (default: 5)
# RATE_LIMIT_AUTH_PER_MINUTE=5

# DE executions per user per minute (default: 10)
# RATE_LIMIT_DE_PER_USER=10

# Max concurrent DE executions per user (default: 3)
# RATE_LIMIT_MAX_CONCURRENT_DE=3

# Global API requests per second (default: 100)
# RATE_LIMIT_REQUESTS_PER_SECOND=100

# Max gRPC message size in bytes (default: 4MB)
# RATE_LIMIT_MAX_MESSAGE_SIZE=4194304

# =============================================================================
# Database Configuration
# =============================================================================

# Database Type: memory, sqlite, postgresql (default: sqlite)
# STORE_TYPE=sqlite

# SQLite Configuration (when STORE_TYPE=sqlite)
# STORE_SQLITE_FILEPATH=.dev/server/sqlite.db

# PostgreSQL Configuration (when STORE_TYPE=postgresql)
# Format: postgres://user:password@localhost:5432/dbname?sslmode=disable
# STORE_POSTGRESQL_DNS=postgres://user:password@localhost:5432/gode

# =============================================================================
# Redis Configuration (REQUIRED for async execution support)
# =============================================================================

# Redis Host (default: localhost)
# REDIS_HOST=localhost

# Redis Port (default: 6379)
# REDIS_PORT=6379

# Redis Password (default: empty - no password)
# REDIS_PASSWORD=

# Redis Database Number (default: 0)
# REDIS_DB=0

# =============================================================================
# Async Execution Configuration
# =============================================================================

# Maximum number of concurrent worker goroutines (default: 10)
# EXECUTOR_MAX_WORKERS=10

# Execution queue size (default: 100)
# EXECUTOR_QUEUE_SIZE=100

# Execution record TTL in Redis (default: 24h)
# Supported units: s (seconds), m (minutes), h (hours)
# EXECUTOR_EXECUTION_TTL=24h

# Result data TTL in Redis (default: 168h / 7 days)
# EXECUTOR_RESULT_TTL=168h

# Progress update TTL in Redis (default: 1h)
# EXECUTOR_PROGRESS_TTL=1h

# =============================================================================
# Observability Configuration
# =============================================================================

# Enable Metrics Collection (default: true)
# METRICS_ENABLED=true

# Metrics Exporter Type: prometheus, stdout (default: prometheus)
# METRICS_TYPE=prometheus

# Log Level: debug, info, warn, error (default: info)
# LOG_LEVEL=info

# Log Format: json, text (default: text)
# LOG_TYPE=text

# Pretty Print Logs (default: false)
# LOG_PRETTY=false

# =============================================================================
# Differential Evolution Configuration
# =============================================================================

# Pareto Channel Buffer Size (default: 100)
# DE_PARETO_CHANNEL_LIMITER=100

# Max Objectives Channel Buffer Size (default: 100)
# DE_MAX_CHANNEL_LIMITER=100

# Result Limiter - Max Pareto Solutions (default: 1000)
# DE_RESULT_LIMITER=1000

# =============================================================================
# Development/Testing
# =============================================================================

# In development, you might want to use:
# TLS_ENABLED=false
# METRICS_TYPE=stdout
# LOG_LEVEL=debug
# LOG_PRETTY=true
# STORE_TYPE=sqlite

# =============================================================================
# Production Recommendations
# =============================================================================

# For production deployments:
# 1. Generate strong JWT_SECRET (32+ characters, random)
# 2. Enable TLS (TLS_ENABLED=true)
# 3. Use PostgreSQL for better scalability
# 4. Configure Redis with persistence (RDB/AOF) and high availability
# 5. Use Prometheus metrics exporter
# 6. Set appropriate rate limits for your load
# 7. Use structured JSON logging (LOG_TYPE=json)
# 8. Run database migrations before deployment
# 9. Monitor health check endpoints (/health, /readiness)
# 10. Configure proper shutdown timeout for graceful deploys
# 11. Set up Prometheus scraping for /metrics endpoint
# 12. Configure executor workers based on available CPU/memory
# 13. Tune Redis TTLs based on usage patterns

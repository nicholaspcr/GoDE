syntax = "proto3";

package api.v1;

import "api/v1/definitions.proto";
import "api/v1/user.proto";
import "google/api/annotations.proto";
import "google/protobuf/empty.proto";

option go_package = "pkg/api";

service ParetoService {
  rpc Get(ParetoServiceGetRequest) returns (ParetoServiceGetResponse) {
    option (google.api.http) = {get: "/v1/pareto/{pareto_ids.id}"};
  }
  rpc Delete(ParetoServiceDeleteRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {delete: "/v1/pareto/{pareto_ids.id}"};
  }
  rpc ListByUser(ParetoServiceListByUserRequest) returns (
      stream ParetoServiceListByUserResponse
  ) {
    option (google.api.http) = {get: "/v1/paretos/{user_ids.username}"};
  }
}

message ParetoServiceCreateRequest {
  Pareto pareto = 1;
}

message ParetoServiceGetRequest {
  ParetoIDs pareto_ids = 1;
}

message ParetoServiceGetResponse {
  Pareto pareto = 1;
}

message ParetoServiceUpdateRequest {
  Pareto pareto = 1;
}

message ParetoServiceDeleteRequest {
  ParetoIDs pareto_ids = 1;
}

message ParetoServiceListByUserRequest {
  UserIDs user_ids = 1;
  int32 limit = 2;   // Page size (default: 50, max: 100)
  int32 offset = 3;  // Starting position (default: 0)
}

message ParetoServiceListByUserResponse {
  Pareto pareto = 1;
  // Pagination metadata (sent with first response in stream)
  int32 total_count = 2;  // Total number of pareto sets for user
  int32 limit = 3;        // Echoed limit for pagination
  int32 offset = 4;       // Echoed offset for pagination
  bool has_more = 5;      // True if more results available
}
